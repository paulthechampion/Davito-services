window.rbgShiftSlider=function(e){(e=e||{}).slideImages=e.hasOwnProperty("slideImages")?e.slideImages:[],e.stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1920,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:1080,e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.transitionDuration=e.hasOwnProperty("transitionDuration")?e.transitionDuration:.25,e.transitionGhostDuration=e.hasOwnProperty("transitionGhostDuration")?e.transitionGhostDuration:.25,e.transitionFilterIntensity=e.hasOwnProperty("transitionFilterIntensity")?e.transitionFilterIntensity:350,e.transitioSpriteIntensity=e.hasOwnProperty("transitioSpriteIntensity")?e.transitioSpriteIntensity:2,e.mouseDispIntensity=e.hasOwnProperty("mouseDispIntensity")?e.mouseDispIntensity:3,e.nav=!e.hasOwnProperty("nav")||e.nav,e.navElement=e.hasOwnProperty("navElement")?e.navElement:".scene-nav",e.interactive=!e.hasOwnProperty("interactive")||e.interactive,e.autoPlay=!e.hasOwnProperty("autoPlay")||e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:3e3;var t=document.getElementById("rbgShiftSlider");PIXI.utils.skipHello();var n,i,a,r,s,o,l,h=new PIXI.Container,u=PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{transparent:!0}),I=new PIXI.Container,w=[],c=[],y=[],d=[],p=[],m=[];const g={x:0,y:0};var v,f,P,x,D,S=0,O=0,X=0,C=0,F=0,M=!1;function b(t){TweenMax.set(g,{x:0,ease:Power0.easeOut}),(P=new TimelineMax({onStart:function(){M=!0,TweenMax.to(g,e.transitionGhostDuration,{x:screen.width,ease:Power0.easeOut})},onComplete:function(){F=t,M=!1,!0===e.interactive&&function(){if(cancelAnimationFrame(f),!P.isActive()){for(var t=0,n=y.length;t<n;t++)m[t].x=0,m[t].y=0,p[t].scale.x=0,p[t].scale.y=0;I.on("mousemove",i).on("touchmove",i),function t(){if(v=requestAnimationFrame(t),g.x>=screen.width){X+=(S-X)/e.mouseDispIntensity,C+=(O-C)/e.mouseDispIntensity;for(var n=0,i=y.length;n<i;n++)p[n].scale.x=X-m[n].x,p[n].scale.y=C-m[n].y,m[n].position.x=X,m[n].position.y=C}else cancelAnimationFrame(v)}()}function i(e){S=e.data.global.x,O=e.data.global.y}}()},onUpdate:function(){X+=(g.x-X)/3,C+=(g.x-C)/3;for(var t=0,n=y.length;t<n;t++)p[t].scale.x=Math.atan(X-m[t].x)*(P.progress()*e.transitionFilterIntensity),m[t].position.x=C*(P.progress()*e.transitionSpriteIntensity)}})).to([w[0],w[1],w[2]],e.transitionDuration,{alpha:0,ease:Power2.easeOut},e.transitionDuration).add(function(){for(var n=0;n<e.slideImages.length;++n)if(n==t)for(var i=0,a=y.length;i<a;i++)w[i].texture=c[n],P.to(w[i],e.transitionDuration,{alpha:1,ease:Power2.easeOut},e.transitionDuration)},e.transitionDuration)}if(!0===e.nav)for(var E=document.querySelectorAll(e.navElement),A=0;A<E.length;A++)E[A].onclick=function(t){return!M&&("next"===this.getAttribute("data-nav")?(F>=0&&F<e.slideImages.length-1?b(F+1):b(0),!0===e.autoPlay&&(clearInterval(x),D())):(F>0&&F<e.slideImages.length?b(F-1):b(e.slideImages.length-1),!0===e.autoPlay&&(clearInterval(x),D())),!1)};function D(){x=setInterval(function(){(F+=1)===e.slideImages.length?b(F=0):b(F)},e.autoPlaySpeed)}t.appendChild(u.view),h.addChild(I),!0===e.fullScreen?(u.view.style.objectFit="cover",u.view.style.width="100%",u.view.style.height="100%",u.view.style.top="50%",u.view.style.left="50%",u.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)",u.view.style.transform="translate( -50%, -50% ) scale(1.2)"):(u.view.style.maxWidth="100%",u.view.style.top="50%",u.view.style.left="50%",u.view.style.webkitTransform="translate( -50%, -50% )",u.view.style.transform="translate( -50%, -50% )"),(n=new PIXI.ticker.Ticker).autoStart=!0,n.add(function(e){u.render(h)}),I.interactive=!0,function(){(i=new PIXI.filters.ColorMatrixFilter).matrix=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],(a=new PIXI.filters.ColorMatrixFilter).matrix=[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0],(r=new PIXI.filters.ColorMatrixFilter).matrix=[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],d.push(i,a,r),(s=new PIXI.Container).position.x=0,(o=new PIXI.Container).position.x=0,(l=new PIXI.Container).position.x=0,y.push(s,o,l);for(var t=0;t<e.slideImages.length;++t)c[t]=new PIXI.Texture.fromImage(e.slideImages[t]);t=0;for(var n=y.length;t<n;t++){I.addChild(y[t]),texture=new PIXI.Texture.fromImage(e.displacementImage),m.push(new PIXI.Sprite(texture)),p.push(new PIXI.filters.DisplacementFilter(m[t]));var h=new PIXI.Sprite(c[0]);w.push(h),w[t].width=u.view.width,w[t].height=u.view.height,w[t].anchor.set(.5),w[t].x=u.view.width/2,w[t].y=u.view.height/2,w[t].alpha=0,y[t].addChild(m[t],w[t]),y[t].filters=[p[t],d[t]],p[t].scale.x=0,p[t].scale.y=0,p[t].autoFit=!0}m[0].anchor.set(0),m[1].anchor.set(.5),m[2].anchor.set(.3),y[1].filters[1].blendMode=PIXI.BLEND_MODES.ADD,y[2].filters[1].blendMode=PIXI.BLEND_MODES.ADD}(),!0===e.autoPlay?(Date.now(),b(F=0),D()):b(0)};